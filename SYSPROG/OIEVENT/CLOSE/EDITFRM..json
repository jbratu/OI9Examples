{
    "record1": {
        "<1>": "Declare Function Message_Box\r\nDeclare Subroutine End_Window, Set_Property, Send_Event, CloseNotesDB \r\n\r\n$Insert Logical\r\n$Insert Message_Box_Equates\r\n\r\nmdi_win   = \"NM_MDI\"\r\ndbname    = .text_1->text\r\nnote_name = .text_2->text\r\nSaveFlag  = .text_4->text\r\n\r\n/* Decrease the total number of child windows */\r\n@recur0 -= 1\r\n\r\nIf SaveFlag Else\r\n\tMsgText = \"Do you want to save '\":note_name:\"' ?\"\r\n\tMsgTitle = \"Notes Manager\"\r\n\tMsgFlags = MSG_BTN_YESNOCAN$ + MSG_DEFAULT1$ +  MSG_ICON_QUESTION$\r\n\t\r\n\tresp = Message_Box(@window, MsgText, MsgTitle, MsgFlags)\r\n\t\r\n\tIf resp = MSG_RET_YES$ Then Send_Event(mdi_win, \"OMNIEVENT\", \"SAVE\")\r\n\t\r\n\tIf resp = MSG_RET_CAN$ Then \r\n\t\t/* Restore everything */\r\n\t\t@recur0 += 1 \r\n\t\tCancelFlag = TRUE$\r\n\t\tReturn FALSE$\t\t\t\t\t\t\r\n\tEnd\t\r\n\t\r\nEnd\r\n\r\n/* Check if this is the last child window */\r\nIf @recur0 = 0 Then\t \r\n\tCntrList   = \".save_btn;.del_btn;.newf_btn;.news_btn;.newc_btn;.editc_btn;.riched_btn\"\r\n\t\r\n\tConvert \";\" to @rm in CntrList\r\n\tSwap \".\" with mdi_win:\".\" in CntrList\r\n\r\n\tSet_Property(CntrList, \"VISIBLE\", FALSE$)\r\n\t\r\n\tCntrList  = \",menu.file.col;,menu.file.fld;,menu.file.save;,menu.edit.delete;\"\r\n\tCntrList := \",menu.edit.fld;,menu.edit.col;,menu.edit.sh_fld;,menu.file.close\"\r\n\r\n\tConvert \";\":@LOWER.CASE to @rm : @UPPER.CASE in CntrList\r\n\tSwap \",\" with mdi_win:\".\" in CntrList\r\n\t\r\n\tSet_Property(CntrList, \"ENABLED\", FALSE$)\r\nEnd \t\r\n\t\r\nEnd_Window(@window)\r\n\r\nRETURN FALSE$\t\t\t\r\n"
    }
}